
<div class="container">

    <div class="row" *ngIf="!browserOk">
      <div class="col">
        <h5>Switch to Safari.  Your Mac/iOS device will not allow this page to load using Chrome.  Don't blame us - blame Apple.</h5>
      </div>
    </div>
    
    
    
    <span *ngIf="okUrl && browserOk">
        <h5>Video Invitation</h5>
        <div class="row" *ngIf="browserOk">
    
          <!-- local participant -->
          <div class="col">
            <div id="preview" #preview style="width:30vw;">
                <div *ngIf="isInitializing"><!-- We COULD display something like this: Loading preview... Please wait.   But we really don't need to.  We are only showing the local camera once we are connected to a room --></div>
            </div>
          </div>
          <!-- local participant -->
    
          <!-- remote participant -->
          <div class="col">
            <div #list></div>
          </div>
          <!-- remote participant -->
        </div>
    
        
        <div class="row">
          <div class="col-sm-12">
            <span *ngIf="connecting"><b>Status:</b> Connecting...</span>
            <span *ngIf="activeRoom && activeRoom.state == 'connected'"><b>Status:</b> Connected &nbsp;&nbsp;&nbsp;</span>
            <span *ngIf="recording_state" [ngStyle]="{'color': recording_state=='recording' ? '#ff0000' : '#000000' }" >{{recording_state}}</span>
          </div>
        </div>
    
        <!-- display true/false - it works but really just for diagnostics
        <div class="row">
          <div class="col-sm-12">
            Host: {{isHost}}
          </div>
        </div>
        -->
        
        <div class="row" *ngIf="!joined">
          <div class="col-sm-12">
            <button id="join_call" (click)="join_call()" class="btn btn-success col-sm-12"> Join </button>
            <P>&nbsp;</P>
          </div>
        </div>
    
        
        <div class="row" *ngIf="joined">
          <div class="col-sm-12">
            <button id="leave_call" (click)="leave_call()" class="btn btn-danger col-sm-12"> Leave </button>
            <P>&nbsp;</P>
          </div>
        </div>
    
        
        <div class="row" *ngIf="roomObj && roomObj['call_ended_ms']">
          <div class="col-sm-12">
            <button id="compose" (click)="compose()" class="btn btn-success col-sm-12"> Produce Video </button>
          </div>
        </div>
    
        

        <div class="row" *ngIf="activeRoom && activeRoom.state == 'connected'">
          <div class="col-sm-4">
            <button *ngIf="recording_state == ''" id="start_recording" (click)="start_recording()" class="btn btn-danger col-sm-12"> Start Recording </button>
            <P>&nbsp;</P>
          </div>

          <div class="col-sm-4">
            <button *ngIf="recording_state == 'recording'" id="pause_recording" (click)="pause_recording()" class="btn btn-secondary col-sm-12"> Pause </button>
            <button *ngIf="recording_state == 'paused'" id="resume_recording" (click)="resume_recording()" class="btn btn-secondary col-sm-12"> Resume </button>
          </div>

          <div class="col-sm-4">
            <button *ngIf="recording_state == 'recording' || recording_state == 'paused'" id="stop_recording" (click)="stop_recording()" class="btn btn-danger col-sm-12"> Stop Recording </button>
            <P>&nbsp;</P>
          </div>
        </div>
    
            
    
    
        
        <!-- 
        <P>&nbsp;</P>    
        Invitation ID: {{invitation.id}}
        <br/>Name: {{invitation.displayName}}
        <br/>Phone: {{invitation.phoneNumber}}
        <br/>Created: {{invitation.created}}
        <br/>Creator ID: {{invitation.creatorId}}
        <br/>Creator Name: {{invitation.creatorName}}
        <br/>Creator Phone: {{invitation.creatorPhone}}
        <br/>Message: {{invitation.message}}
        -->
    </span>
    
    
    <span *ngIf="!okUrl">
    bad url
    </span>
    
    
    </div>